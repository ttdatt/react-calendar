"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),a=function(){return a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},a.apply(this,arguments)},r={0:"Su",1:"Mo",2:"Tu",3:"We",4:"Th",5:"Fr",6:"Sa"},l={0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"};function i(e){return(e.getFullYear()<10?"0"+e.getFullYear():e.getFullYear())+"_"+(e.getMonth()<10?"0"+e.getMonth():e.getMonth())+"_"+(e.getDate()<10?"0"+e.getDate():e.getDate())}function o(e){return new Date(Number(e.substr(0,4)),Number(e.substr(5,2)),Number(e.substr(8,2)))}function c(e,t){if(t.getFullYear()<e.getFullYear())return!0;if(t.getFullYear()===e.getFullYear()){if(t.getMonth()<e.getMonth())return!0;if(t.getMonth()===e.getMonth()&&t.getDate()<e.getDate())return!0}return!1}function u(e){return null!=e&&e.getTime&&!isNaN(e.getTime())}function s(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function d(e,t,n){var a=e.getFullYear(),r=e.getMonth(),l=e.getDate(),i=t.getFullYear(),o=t.getMonth(),c=t.getDate(),u=n.getFullYear(),s=n.getMonth(),d=n.getDate();return a<=u&&u<=i&&(a<u&&u<i||(a===i?r<=s&&s<=o&&(r<s&&s<o||(r===o?l<=d&&d<=c&&s===o:r===s?l<=d:o===s&&d<=c)):a===u?s>r||s===r&&d>=l:i===u&&(s<o||s===o&&d<=c)))}function f(e){return e%4==0&&e%100!=0||e%400==0}function g(e,t){return{0:31,1:f(e)?29:28,2:31,3:30,4:31,5:30,6:31,7:31,8:30,9:31,10:30,11:31}[t]}function h(e){return g(e.getFullYear(),e.getMonth())===e.getDate()}function m(e){return 0===e?11:e-1}function y(e){return 11===e?0:e+1}function w(e){return 1===e?1:e-1}function D(e){return e+1}function v(e){return function(e){return 11===e.getMonth()&&h(e)}(e)?new Date(e.getFullYear()+1,0,1):h(e)?new Date(e.getFullYear(),e.getMonth()+1,1):new Date(e.getFullYear(),e.getMonth(),e.getDate()+1)}function M(e,t){var n=6-t;return e<=n?e+t:e-n-1}function b(e){return e%20==0?20*(e/20-1)+1:20*Number(Math.floor(e/20))+1}function S(e){for(var t=e.isRangeSelectModeOn,n=e.isRangeView,a=e.selectedDate,r=e.selectedRangeStart,l=e.selectedRangeEnd,i=e.highlightsMap,o=e.newSelectedRangeStart,c=e.newSelectedRangeEnd,u=e.isSelectMultiDate,s=e.selectedMultiDates,d=e.yearInView,f=e.monthInView,h=e.startOfTheWeek,D=e.isDisabled,v=e.checkIfWeekend,M=[[],[],[],[],[],[]],b=function(e,t,n){var a=new Date;return a.setDate(1),a.setMonth(t),a.setFullYear(e),function(e,t){return void 0===t&&(t=0),e>=t?e-t:6-t+1+e}(a.getDay(),n)}(d,f,h),S=new Date,R=g(d,f),p=0===f,k=11===f,E=g(p?w(d):d,m(f)),C=0,x=0,V=E-(b-1);V<=E;V++)7===x&&(x=0,C++),M[C].push(_({currDate:new Date(p?w(d):d,m(f),V),activeMonthInView:!1,highlightsMap:i,newSelectedRangeEnd:c,newSelectedRangeStart:o,selectedDate:a,selectedRangeEnd:l,selectedRangeStart:r,isDisabled:D,isRangeSelectModeOn:t,isRangeView:n,isSelectMultiDate:u,row:C,weekColumn:x,checkIfWeekend:v,today:S,selectedMultiDates:s,startOfTheWeek:h})),x++;for(var F=1;F<=R;F++)7===x&&(x=0,C++),M[C].push(_({currDate:new Date(d,f,F),activeMonthInView:!0,highlightsMap:i,newSelectedRangeEnd:c,newSelectedRangeStart:o,selectedDate:a,selectedRangeEnd:l,selectedRangeStart:r,isDisabled:D,isRangeSelectModeOn:t,isRangeView:n,isSelectMultiDate:u,row:C,weekColumn:x,checkIfWeekend:v,today:S,selectedMultiDates:s,startOfTheWeek:h})),x++;for(var Y=1;M[5].length<7;)7===x&&(x=0,C++),M[C].push(_({currDate:new Date(k?d+1:d,y(f),Y),activeMonthInView:!1,highlightsMap:i,newSelectedRangeEnd:c,newSelectedRangeStart:o,selectedDate:a,selectedRangeEnd:l,selectedRangeStart:r,isDisabled:D,isRangeSelectModeOn:t,isRangeView:n,isSelectMultiDate:u,row:C,weekColumn:x,checkIfWeekend:v,today:S,selectedMultiDates:s,startOfTheWeek:h})),x++,Y++;return M}function _(e){var t=e.currDate,n=e.activeMonthInView,a=e.highlightsMap,r=e.newSelectedRangeEnd,l=e.newSelectedRangeStart,o=e.selectedDate,f=e.selectedRangeEnd,g=e.selectedRangeStart,h=e.isDisabled,m=e.isRangeSelectModeOn,y=e.isRangeView,w=e.isSelectMultiDate,D=e.row,v=e.weekColumn,b=e.checkIfWeekend,S=e.today,_=e.selectedMultiDates,R=e.startOfTheWeek;return{date:t,dayOfMonth:t.getDate(),month:t.getMonth(),activeMonthInView:n,isHighlight:1===a[i(t)],isInRange:!!y&&(m?!(!u(l)||!u(r))&&(c(r,l)?d(l,r,t):d(r,l,t)):!!g&&!!f&&d(g,f,t)),isRangeStart:!!y&&(m?!!u(l)&&s(l,t):!!g&&s(g,t)),isRangeEnd:!!y&&(!m&&(!!f&&s(f,t))),year:t.getFullYear(),dayOfWeek:M(v,R),isWeekend:b(t),isToday:s(t,S),isFirstRow:0===D,isLastRow:5===D,isFirsColumn:0===v,isLastColumn:6===v,isSelected:w?!!_[i(t)]:!y&&(!!o&&(t.getMonth()===o.getMonth()&&t.getFullYear()===o.getFullYear()&&t.getDate()===o.getDate())),isDisabled:h(t)}}var R={root:{height:"12%",padding:"1% 2%",display:"flex",alignTtems:"center",width:"100%"},rc_header_nav:{width:"10.14%",height:"100%",flex:"0 0 auto"},rch_header_label:{width:"65.21%",height:"100%",margin:"0 4.34%",flex:"1 1 auto",display:"flex",justifyContent:"center",alignItems:"center"}};var p=e.memo((function(e){var t=e.onClickPrev,a=e.onChangeViewType,r=e.onClickNext,i=e.viewType,o=e.monthInView,c=e.yearInView,u=e.yearMatrixEnd,s=e.yearMatrixStart;return n.default.createElement("header",{style:R.root,className:"rc_header"},n.default.createElement("button",{style:R.rc_header_nav,className:"rc_header_nav rc_header_nav-prev",onClick:t},n.default.createElement("span",null,"←")),"month_dates"===i?n.default.createElement("button",{style:R.rch_header_label,className:"rc_header_label rc_header_label-days-of-month",onClick:function(){return a("years")}},n.default.createElement("div",null,n.default.createElement("span",null,l[o])),n.default.createElement("div",null,n.default.createElement("span",null,c))):"months"===i?n.default.createElement("button",{style:R.rch_header_label,className:"rc_header_label rc_header_label-months"},n.default.createElement("div",{onClick:function(){return a("years")}},n.default.createElement("span",null,c))):n.default.createElement("button",{style:R.rch_header_label,className:"rc_header_label rc_header_label-years",onClick:function(){return a("month_dates")}},n.default.createElement("div",null,n.default.createElement("span",null,s,"-",u))),n.default.createElement("button",{style:R.rc_header_nav,className:"rc_header_nav rc_header_nav-next",onClick:r},n.default.createElement("span",null,"→")))})),k={width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},E={width:"95%",height:"45%",display:"flex",alignItems:"center",justifyContent:"center"};var C=e.memo((function(e){var t=e.cell,a=e.onMonthClicked;return n.default.createElement("div",{style:k},n.default.createElement("button",{style:E,onClick:function(){a(t)}},l[t.month]))})),x={root:{height:"100%"},"rc_body-row":{height:"24.9%",display:"flex",width:"100%"},"rc_body-cell":{flexBasis:"33.33%",maxWidth:"33.33%",height:"100%"}};var V=e.memo((function(t){var a=t.onChangeViewingMonth,r=t.onChangeViewType,l=e.useMemo((function(){return function(e){var t=Array.from({length:12},(function(t,n){return{month:n,isCurrentMonth:(new Date).getMonth()===n,isSelectedMonth:1===e[n]}}));return[t.slice(0,3),t.slice(3,6),t.slice(6,9),t.slice(9,12)]}({})}),[]);return n.default.createElement("div",{role:"grid",style:x.root,className:"rc_body-months"},l.map((function(e,t){return n.default.createElement("div",{style:x["rc_body-row"],className:"rc_body-row",key:t},e.map((function(e){return n.default.createElement("div",{style:x["rc_body-cell"],className:"rc_body-cell"+(e.isCurrentMonth?" rc_this_month":""),key:e.month},n.default.createElement(C,{cell:e,onMonthClicked:function(e){a(e.month),r("month_dates")}}))})))})))})),F={width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},Y={width:"95%",height:"45%",display:"flex",alignItems:"center",justifyContent:"center"};var I=e.memo((function(e){var t=e.cell,a=e.onYearClicked;return n.default.createElement("div",{style:F},n.default.createElement("button",{style:Y,onClick:function(){a(t)}},t.year))})),N={root:{height:"100%"},"rc_body-row":{height:"24.9%",display:"flex",width:"100%"},"rc_body-cell":{width:"20%",height:"100%"}};var A=e.memo((function(t){var a=t.onChangeViewType,r=t.onChangeViewingYear,l=t.yearMatrixStart,i=e.useMemo((function(){return function(e,t){var n=Array.from({length:20},(function(n,a){return{year:e+a,isCurrentYear:(new Date).getFullYear()===e+a,isSelectedYear:1===t[e+a]}}));return[n.slice(0,5),n.slice(5,10),n.slice(10,15),n.slice(15,20)]}(l,{})}),[l]);return n.default.createElement("div",{role:"grid",style:N.root,className:"rc_body-years"},i.map((function(e,t){return n.default.createElement("div",{style:N["rc_body-row"],className:"rc_body-row",key:t},e.map((function(e){return n.default.createElement("div",{style:N["rc_body-cell"],className:"rc_body-cell"+(e.isCurrentYear?" rc_this_year":""),key:e.year},n.default.createElement(I,{cell:e,onYearClicked:function(e){r(e.year),a("months")}}))})))})))})),O={"rc_body-weekdays":{height:"15%",margin:"0",padding:0,display:"flex",width:"100%",listStyle:"none"},"rc_body-weekdays_cell":{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",flexBasis:"14.286%",maxWidth:"14.286%"},"rc_body-weekdays_cell_value":{width:"65.95%",display:"flex",alignItems:"center",justifyContent:"center"}};var T=e.memo((function(t){var a=t.startOfWeek,l=t.weekendMap,i=e.useMemo((function(){return function(e){void 0===e&&(e=0);var t=Object.keys(r).slice(e,7).concat(Object.keys(r).slice(0,e));return{map:t.reduce((function(e,t){return e[Number(t)]=r[Number(t)],e}),{}),order:t}}(a)}),[a]).order;return n.default.createElement("ul",{style:O["rc_body-weekdays"],className:"rc_body-weekdays"},i.map((function(e){return n.default.createElement("li",{style:O["rc_body-weekdays_cell"],key:e,className:"rc_body-weekdays_cell"+(l[e]?" rc_wknd":"")},n.default.createElement("div",{style:O["rc_body-weekdays_cell_value"]},n.default.createElement("span",null,r[e])))})))})),W={width:"100%",height:"99%",display:"flex",alignItems:"center",justifyContent:"center"};var P=e.memo((function(t){var a=t.cell,r=t.onDateClicked,l=t.noPadRangeCell,i=e.useMemo((function(){return function(e){return{width:e?"100%":"69.80%",height:e?"90%":"80%",display:"flex",alignItems:"center",justifyContent:"center"}}(l)}),[l]),o=e.useMemo((function(){return function(e){return{width:e?"69.8%":"100%",height:"92%"}}(l)}),[l]);return n.default.createElement("div",{style:W},n.default.createElement("div",{style:i,className:"rc_body-cell_value"},n.default.createElement("button",{style:o,disabled:a.isDisabled,tabIndex:a.isDisabled?-1:0,onClick:function(){return r(a)}},a.dayOfMonth)))})),j={"rc_body-days-of-month":{height:"85%"},"rc_body-row":{height:"16.664%",display:"flex",width:"100%",alignItems:"center"},"rc_body-cell":{flexBasis:"14.286%",maxWidth:"14.286%",height:"100%",display:"flex",aligntems:"center"}};var L=e.memo((function(t){var r=t.selectedDate,l=t.selectedRangeStart,o=t.selectedRangeEnd,u=t.newSelectedRangeStart,d=t.startOfWeek,f=t.newSelectedRangeEnd,g=t.isRangeSelectorView,h=t.skipDisabledDatesInRange,m=t.onChangeRangeSelectMode,y=t.fixedRange,w=t.isFixedRangeView,D=t.isRangeSelectModeOn,M=t.isDisabled,b=t.selectedMultiDates,_=t.isMultiSelectorView,R=t.monthInView,p=t.hideAdjacentDates,k=t.onChangenNewSelectedRangeEnd,E=t.onChangenNewSelectedRangeStart,C=t.weekends,x=t.onChange,V=t.yearInView,F=t.allowFewerDatesThanRange,Y=t.noPadRangeCell,I=t.disableFuture,N=t.disablePast,A=t.lockView,O=t.checkIfWeekend,T=t.onPartialRangeSelect,W=t.onEachMultiSelect,L=t.highlightsMap,q=t.disableToday,z=e.useMemo((function(){return S({selectedDate:r,selectedRangeStart:l,selectedRangeEnd:o,newSelectedRangeStart:u,newSelectedRangeEnd:f,checkIfWeekend:O,isRangeView:g||w,isRangeSelectModeOn:D,weekendIndexes:C,selectedMultiDates:b,highlightsMap:L,isSelectMultiDate:_,yearInView:V,monthInView:R,startOfTheWeek:d,disableFuture:I,disablePast:N,disableToday:q,isDisabled:M})}),[r,l,o,u,f,g,w,D,O,C,b,L,_,V,R,d,I,N,q,M]),H=e.useCallback((function(e){var t=e.date;if(!(A&&t.getMonth()!==R))if(g&&!w)if(D&&u){var n=new Date(u.getFullYear(),u.getMonth(),u.getDate());if(c(n,t)){var r=t,l=n;"function"==typeof x&&x([r,l])}else{r=n,l=t;"function"==typeof x&&x([r,l])}k(void 0),m(!1)}else E(t),k(void 0),m(!0),T&&T(t);else if(g&&w){var o=function(e,t,n){for(var a=t,r=e,l=!1,i=0;a>0;){if(1500===i){l=!0;break}var o=v(r);if(n.upperLimit&&s(n.upperLimit,o)){l=!0;break}r=o,n.skipDisabledDatesInRange?n.skipDisabledDatesInRange&&!n.isDisabled(o)&&a--:a--,i++}return{endDate:r,limitReached:l}}(t,y,{isDisabled:M,skipDisabledDatesInRange:h,upperLimit:A?new Date(t.getFullYear(),t.getMonth()+1,1):I?v(new Date):void 0});l=o.endDate;o.limitReached&&!F||"function"==typeof x&&x([t,l])}else if(_){var d=i(t),f=a({},b);b[d]?f[d]=void 0:f[d]=t,W&&W(t),x&&x(Object.keys(f).filter((function(e){return!!f[e]})).map((function(e){return f[e]})))}else"function"==typeof x&&x(t)}),[A,R,g,w,_,D,u,k,m,x,E,T,y,M,h,I,F,b,W]);return n.default.createElement("div",{style:j["rc_body-days-of-month"],className:"rc_body-days-of-month",role:"grid"},z.map((function(e,t){return n.default.createElement("div",{style:j["rc_body-row"],className:"rc_body-row",key:t},e.map((function(e){return n.default.createElement("div",{style:j["rc_body-cell"],onMouseEnter:function(){g&&D&&k(new Date(e.year,e.month,e.dayOfMonth))},key:i(e.date),className:"rc_body-cell"+(e.activeMonthInView?" rc_active":"")+(e.isWeekend?" rc_wknd":"")+(e.isToday?" rc_today":"")+(e.isFirstRow?" rc_fr":"")+(e.isToday?" rc_today":"")+(e.isHighlight?" rc_highlight":"")+(e.isLastRow?" rc_lr":"")+(e.isFirsColumn?" rc_fc":"")+(e.isLastColumn?" rc_lc":"")+(e.isSelected&&!g?" rc_selected":"")+(e.isDisabled?" rc_disabled":"")+(e.isInRange?" rc_in_range":"")+(e.isRangeStart?" rc_range_start":"")+(e.isRangeEnd?" rc_range_end":"")+(D?" rc_range_mode":"")},!e.activeMonthInView&&p?null:n.default.createElement(P,{noPadRangeCell:Y,cell:e,onDateClicked:H}))})))})))})),q={height:"88%",width:"100%"},z={years:1,months:1,month_dates:1};var H=e.memo(e.forwardRef((function(t,a){var r=t.size,l=t.fontSize,i=t.isNormalView,c=t.isMultiSelectorView,s=t.isRangeSelectorView,d=t.viewDate,f=t.selectedDate,g=t.selectedRangeStart,h=t.selectedMultiDates,v=t.minAllowedDate,M=t.maxAllowedDate,S=t.isSecondary,_=t.lockView,R=t.startOfWeek,k=t.noPadRangeCell,E=t.weekends,C=t.isRangeSelectModeOn,x=t.onChangeRangeSelectMode,F=t.initialView,Y=t.skipDisabledDatesInRange,I=t.hideAdjacentDates,N=t.allowFewerDatesThanRange,O=t.selectedRangeEnd,W=t.newSelectedRangeStart,P=t.onChangenNewSelectedRangeEnd,j=t.onChangenNewSelectedRangeStart,H=t.onPartialRangeSelect,J=t.onEachMultiSelect,U=t.newSelectedRangeEnd,G=t.fixedRange,K=t.isFixedRangeView,Q=t.isDisabled,X=t.checkIfWeekend,Z=t.onChange,$=t.showDualCalendar,ee=t.disableFuture,te=t.weekendMap,ne=t.disablePast,ae=t.highlightsMap,re=t.disableToday,le=t.onChangeMonth,ie=e.useMemo((function(){return function(e,t){return{root:{rc:{width:e+"px",height:e+"px",fontSize:t+"px",display:"flex",alignItems:"flex-start",flexDirection:"column",boxSizing:"border-box"}}}}(r,l)}),[r,l]),oe=e.useState(F&&z[F]?F:"month_dates"),ce=oe[0],ue=oe[1],se=e.useState((function(){return B({isNormalView:i,isMultiSelectorView:c,isRangeSelectorView:s,selectedDate:f,selectedRangeStart:g,selectedMultiDates:h,viewDate:d,minAllowedDate:v?o(v):void 0,maxAllowedDate:M?o(M):void 0}).getMonth()})),de=se[0],fe=se[1],ge=e.useState(B({isNormalView:i,isMultiSelectorView:c,isRangeSelectorView:s,selectedDate:f,selectedRangeStart:g,selectedMultiDates:h,viewDate:d,minAllowedDate:v?o(v):void 0,maxAllowedDate:M?o(M):void 0}).getFullYear()),he=ge[0],me=ge[1];e.useImperativeHandle(a,(function(){return{setView:function(e){fe(e.getMonth()),me(e.getFullYear())}}})),e.useLayoutEffect((function(){if($&&S){var e=y(de);fe(e),me(0===e?D(he):he)}}),[$,S]),e.useEffect((function(){u(f)&&(fe(f.getMonth()),me(f.getFullYear()))}),[f]),e.useEffect((function(){var e=Object.keys(h).map((function(e){return h[e]})).filter((function(e){return u(e)}));1===e.length&&e[0]&&(fe(e[0].getMonth()),me(e[0].getFullYear()))}),[h]);var ye=e.useCallback((function(e){!_&&fe(e)}),[_]),we=e.useCallback((function(e){!_&&me(e)}),[_]),De=e.useCallback((function(e){!_&&ue(e)}),[_]),ve=e.useState(b(he)),Me=ve[0],be=ve[1];e.useEffect((function(){be(b(he))}),[he,be]);var Se=e.useMemo((function(){return[e=Me,e+19];var e}),[Me]),_e=Se[0],Re=Se[1],pe=e.useCallback((function(){var e;"month_dates"===ce&&(0===de&&me(w(he)),ye(m(de)));"years"===ce&&be(1===(e=Me)?1:b(e-1)),"months"===ce&&we(1!==he?he-1:1)}),[ye,de,we,he,ce,be,Me]);e.useEffect((function(){null==le||le(de,he)}),[de,he]);var ke=e.useCallback((function(){"month_dates"===ce&&(11===de&&we(D(he)),ye(y(de)));"years"===ce&&be(b(Me+20)),"months"===ce&&we(D(he))}),[ye,de,we,he,ce,be,Me]),Ee=e.useRef(null),Ce=e.useRef([]),xe=e.useState(!1),Ve=xe[0],Fe=xe[1];return e.useEffect((function(){if(Ve){var e=Ee.current;if(e){Ce.current=e?Array.from(e.querySelectorAll('[role="grid"] button:not([disabled])')):[];var t=Ce.current[0],n=Ce.current[Ce.current.length-1],a=e.querySelector('[role="grid"] .rc_selected button')||e.querySelector('[role="grid"] .rc_range_end button')||e.querySelector('[role="grid"] .rc_range_start button'),r=e.querySelector('[role="grid"] .rc_active button'),l=e.querySelector(".rc_header");if(l){var i=l.querySelector(".rc_header_nav-prev"),o=l.querySelector(".rc_header_nav-next"),c=l.querySelector(".rc_header_label");e&&!e.contains(document.activeElement)&&(a?a.focus():r?r.focus():t.focus());var u=function(e,n){var a,r,l=n===t;return e?(a=e,r=Ce.current.indexOf(a),l?r<Ce.current.length-1?Ce.current[r+1]:n:r-1>-1?Ce.current[r-1]:n):null};return e.addEventListener("keydown",s,{capture:!0}),function(){e.removeEventListener("keydown",s,{capture:!0})}}}}function s(e){var a=e.target,r=Ce.current&&Ce.current.find((function(e){return e===a}));if("Tab"===e.key&&(e.preventDefault(),(null==l?void 0:l.contains(document.activeElement))?t.focus():null==i||i.focus()),"ArrowDown"===e.key){e.preventDefault();var s="month_dates"===ce?7:"months"===ce?3:5;if(!r)return;for(var d=r;s>0;)d=u(d,t),s--;null==d||d.focus()}if("ArrowUp"===e.key){e.preventDefault();s="month_dates"===ce?7:"months"===ce?3:5;if(!r)return;for(d=r;s>0;)d=u(d,n),s--;null==d||d.focus()}if("ArrowLeft"===e.key)if(e.preventDefault(),document.activeElement===i)null==o||o.focus();else if(document.activeElement===c)null==i||i.focus();else if(document.activeElement===o)null==c||c.focus();else{if(!r)return;null==(d=u(r,n))||d.focus()}if("ArrowRight"===e.key)if(e.preventDefault(),document.activeElement===i)null==c||c.focus();else if(document.activeElement===c)null==o||o.focus();else if(document.activeElement===o)null==i||i.focus();else{if(!r)return;null==(d=u(r,t))||d.focus()}"Home"===e.key&&(e.preventDefault(),t.focus()),"End"===e.key&&(e.preventDefault(),n.focus()),"Escape"===e.key&&(e.preventDefault(),n.focus(),n.blur())}}),[Ee,ce,Ve,de,he,Me]),n.default.createElement("div",{onFocus:function(){!Ve&&Fe(!0)},onBlur:function(e){e.currentTarget.contains(e.target)||Fe(!1)},style:ie.root.rc,className:"rc",ref:Ee},n.default.createElement(p,{onClickPrev:pe,onClickNext:ke,onChangeViewType:De,viewType:ce,monthInView:de,yearInView:he,yearMatrixStart:_e,yearMatrixEnd:Re}),n.default.createElement("div",{style:q,className:"rc_body"},"months"===ce&&n.default.createElement(V,{onChangeViewType:De,onChangeViewingMonth:ye}),"years"===ce&&n.default.createElement(A,{onChangeViewType:De,onChangeViewingYear:we,yearMatrixStart:_e,yearMatrixEnd:Re}),"month_dates"===ce&&n.default.createElement(n.default.Fragment,null,n.default.createElement(T,{startOfWeek:R,weekendMap:te}),n.default.createElement(L,{noPadRangeCell:k,isRangeSelectModeOn:C,onChangeRangeSelectMode:x,skipDisabledDatesInRange:Y,hideAdjacentDates:I,allowFewerDatesThanRange:N,selectedDate:f,selectedRangeStart:g,selectedRangeEnd:O,lockView:_,newSelectedRangeStart:W,startOfWeek:R,onChangenNewSelectedRangeEnd:P,onChangenNewSelectedRangeStart:j,onPartialRangeSelect:H,onEachMultiSelect:J,newSelectedRangeEnd:U,isRangeSelectorView:s,fixedRange:G,isFixedRangeView:K,isDisabled:Q,checkIfWeekend:X,selectedMultiDates:h,isMultiSelectorView:c,monthInView:de,maxAllowedDate:M,minAllowedDate:v,weekends:E,onChange:Z,yearInView:he,disableFuture:ee,disablePast:ne,highlightsMap:ae,disableToday:re}))))})));function B(e){var t=e.isMultiSelectorView&&e.selectedMultiDates&&e.selectedMultiDates[Object.keys(e.selectedMultiDates)[0]];return u(e.viewDate)?e.viewDate:e.isNormalView&&u(e.selectedDate)?e.selectedDate:e.isRangeSelectorView&&e.selectedRangeStart?e.selectedRangeStart:t&&u(t)?t:u(e.minAllowedDate)?e.minAllowedDate:u(e.maxAllowedDate)?e.maxAllowedDate:new Date}var J=[],U={display:"inline-flex"};var G=n.default.forwardRef((function(t,r){var l=t.value,s=t.isMultiSelector,d=t.className,f=void 0===d?"":d,g=t.isRangeSelector,h=t.useDarkMode,m=void 0!==h&&h,y=t.weekends,w=t.highlights,D=void 0===w?J:w,v=t.initialViewDate,M=t.allowFewerDatesThanRange,b=void 0!==M&&M,S=t.startOfWeek,_=void 0===S?1:S,R=t.maxAllowedDate,p=t.skipDisabledDatesInRange,k=void 0!==p&&p,E=t.minAllowedDate,C=t.fixedRange,x=t.isDisabled,V=t.onPartialRangeSelect,F=t.noPadRangeCell,Y=void 0===F||F,I=t.onEachMultiSelect,N=t.initialView,A=t.onChange,O=t.lockView,T=void 0!==O&&O,W=t.disableFuture,P=void 0!==W&&W,j=t.size,L=void 0===j?276:j,q=t.fontSize,z=void 0===q?16:q,B=t.disablePast,G=void 0!==B&&B,K=t.disableToday,Q=void 0!==K&&K,X=t.showDualCalendar,Z=void 0!==X&&X,$=t.hideAdjacentDates,ee=void 0!==$&&$,te=t.onChangeMonth,ne=!!g,ae=ne&&!!Z,re=!ne&&!!s,le=!!(ne&&"number"==typeof C&&C>0),ie=!ne&&!re,oe=e.useRef({setView:function(){}});e.useImperativeHandle(r,(function(){return{setView:function(e){oe.current.setView(e)}}}));var ce=_,ue=le?C:1,se=e.useMemo((function(){return Array.isArray(D)?D.filter((function(e){return u(e)})).reduce((function(e,t){return e[i(t)]=1,e}),{}):{}}),[D]),de=e.useMemo((function(){return Array.isArray(y)&&(y.every((function(e){return"number"==typeof e}))||0===y.length)?y:[6,0]}),[y]),fe=e.useMemo((function(){return u(R)?i(R):void 0}),[R]),ge=e.useMemo((function(){return u(E)?i(E):void 0}),[E]),he=e.useMemo((function(){return u(v)?v:void 0}),[v]),me=e.useMemo((function(){return!!u(R)&&(!u(E)||c(R,E))}),[R,E]),ye=e.useMemo((function(){return!!u(E)&&(!u(R)||c(R,E))}),[R,E]),we=e.useMemo((function(){return function(e){var t=e.disablePast,n=e.disableToday,a=e.disableFuture,r=e.customDisabledCheck,l=e.maxDate,i=e.minDate,o=e.applyMax,u=e.applyMin,s=new Date,d=s.getFullYear(),f=s.getMonth(),g=s.getDate();return function(e){if(t){if(e.getFullYear()<d)return!0;if(e.getFullYear()===d&&e.getMonth()<f)return!0;if(e.getFullYear()===d&&e.getMonth()===f&&e.getDate()<g)return!0}if(n&&e.getFullYear()===d&&e.getMonth()===f&&e.getDate()===g)return!0;if(a){if(e.getFullYear()>d)return!0;if(e.getFullYear()===d&&e.getMonth()>f)return!0;if(e.getFullYear()===d&&e.getMonth()===f&&e.getDate()>g)return!0}return!!(o&&l&&c(e,l))||!!(u&&i&&c(i,e))||"function"==typeof r&&r(e)}}({disablePast:G,disableToday:Q,disableFuture:P,customDisabledCheck:x,maxDate:fe?o(fe):void 0,minDate:ge?o(ge):void 0,applyMax:me,applyMin:ye})}),[me,ye,P,G,Q,x,fe,ge]),De=e.useMemo((function(){return function(e){var t=e.reduce((function(e,t){return e[t]=1,e}),{});return function(e){return 1===t[e.getDay()]}}(de)}),[de]),ve=e.useMemo((function(){return de.reduce((function(e,t){return e[t]=1,e}),{})}),[de]),Me=e.useMemo((function(){return ie&&u(l)?l:void 0}),[ie,l]),be=e.useMemo((function(){return re&&Array.isArray(l)&&l.every(u)?l.reduce((function(e,t){return u(t)&&(e[i(t)]=t),e}),{}):{}}),[re,l]),Se=e.useMemo((function(){if(ne&&Array.isArray(l)&&u(l[0])){var e=l[0].getFullYear(),t=l[0].getMonth(),n=l[0].getDate();return new Date(e,t,n)}}),[ne,l]),_e=e.useMemo((function(){if(ne&&Se&&Array.isArray(l)&&u(l[1])&&c(l[1],Se)){var e=l[1].getFullYear(),t=l[1].getMonth(),n=l[1].getDate();return new Date(e,t,n)}}),[ne,Se,l]),Re=e.useState(!1),pe=Re[0],ke=Re[1],Ee=e.useState(Se),Ce=Ee[0],xe=Ee[1],Ve=e.useState(_e),Fe=Ve[0],Ye=Ve[1],Ie=e.useMemo((function(){return{noPadRangeCell:!!Y&&ne,showDualCalendar:ae,viewDate:he,useDarkMode:m,className:f,hideAdjacentDates:!!ee,isNormalView:ie,size:L,fontSize:z,startOfWeek:ce,weekends:de,isRangeSelectModeOn:pe,onChangeRangeSelectMode:ke,skipDisabledDatesInRange:!!k,allowFewerDatesThanRange:!!b,selectedDate:Me,selectedRangeStart:Se,selectedRangeEnd:_e,lockView:!!T,newSelectedRangeStart:Ce,onChangenNewSelectedRangeEnd:Ye,onChangenNewSelectedRangeStart:xe,onPartialRangeSelect:V,onEachMultiSelect:I,newSelectedRangeEnd:Fe,isRangeSelectorView:ne,initialView:N,fixedRange:ue,isFixedRangeView:le,isDisabled:we,checkIfWeekend:De,selectedMultiDates:be,isMultiSelectorView:re,maxAllowedDate:fe,minAllowedDate:ge,onChange:A,disableFuture:P,disablePast:G,highlightsMap:se,disableToday:Q,weekendMap:ve,onChangeMonth:te}}),[b,we,De,ve,f,P,G,ee,Q,N,ue,z,se,he,ae,le,re,ie,pe,ne,T,fe,ge,Fe,Y,Ce,A,I,V,Me,be,_e,Se,L,k,ce,m,de,te]),Ne=e.useMemo((function(){return"string"==typeof f?"rc_root"+(m?" rc_dark":"")+(ae?" rc_dual":"")+" "+f+(Y&&ne?" rc_no_range_padding":""):"rc_root"+(m?" rc_dark":"")+(ae?" rc_dual":"")+(Y&&ne?" rc_no_range_padding":"")}),[f,m,ae,Y,ne]);return n.default.createElement("div",{className:Ne,style:U},ae?n.default.createElement(n.default.Fragment,null,n.default.createElement(H,a({isSecondary:!1},Ie)),n.default.createElement(H,a({isSecondary:!0},Ie))):n.default.createElement(H,a({ref:oe,isSecondary:!1},Ie)))})),K=function(e){if(!Array.isArray(e))return[];var t=e[0],n=e[1];if(!u(t)||!u(n))return[];for(var a=t,r=[];c(n,a);)r.push(a),a=v(a);return r.push(n),r};exports.Calendar=G,exports.giveDaysInRange=K,exports.giveFormatter=function(e){return function(e){var t={YYYY:!0,MM:!0,DD:!0},n=e.split("-");if(3!==n.length)throw new Error("Date format is invalid.");if(!n.every((function(e){return t[e]})))throw new Error("Date format uses unknown parts.");return function(e,t){if(u(e)){var a="";return n.forEach((function(n,r){"YYYY"===n&&(a+=e.getFullYear()),"MM"===n&&(a+=e.getMonth()),"DD"===n&&(a+=e.getDate()),2!==r&&(a+=t)})),a}}}(e||"DD-MM-YYYY")};
